<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>applauncherd: Debugging boosted applications</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="main.html">Optimising application startup</a>      </li>
      <li><a class="el" href="tipsandtricks.html">Tips and tricks</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Debugging boosted applications </h1>  </div>
</div>
<div class="contents">
<h2><a class="anchor" id="debugging"></a>
Debugging</h2>
<p>To debug a launched application, the debugger must be attached to an already running booster process. Due to security limitations, it is required to use <code>aegis-su</code> tool from <code>aegis-dss-tools</code> package. For instance:</p>
<p>1. Run the following command:</p>
<div class="fragment"><pre class="fragment">aegis-su -r tcb aegis-exec -p gdb -a CAP::sys_ptrace gdb /usr/bin/applauncherd.bin $(pgrep booster-d)
</pre></div><p>2. Set a breakpoint to the application code and let the process continue to that point:</p>
<div class="fragment"><pre class="fragment">(gdb) <span class="keywordflow">break</span> main.cpp:42
No source file named main.cpp.
Make breakpoint pending on future shared library load? (y or [n]) y

Breakpoint 1 (main.cpp:42) pending.
(gdb) c
Continuing.
</pre></div><p>3. Invoke the application with the booster to which the debugger is attached:</p>
<div class="fragment"><pre class="fragment">invoker --type=d /usr/bin/myApp
</pre></div><h3><a class="anchor" id="pie-binaries"></a>
PIE binaries and debugging</h3>
<p>If you use the <code>pkg-config</code> when building your binaries, they are linked with the <code>-pie</code> flag. The <code>-pie</code> flag makes your binaries <em>position-independent</em> <em>executables</em>. This means that the executables can be either used as a normal shared library or run, for example, from the command line.</p>
<p>This creates problems when debugging your application with gdb older than version 7.1 which introduced the support for PIE binaries.</p>
<p>To use gdb 7.0 or earlier, link your binaries as libraries by using <code>-shared</code> instead of <code>-pie</code>. After this, you cannot execute your binaries directly, you have to use <code>invoker</code>.</p>
<p>Setting correct linker flags with qmake:</p>
<div class="fragment"><pre class="fragment">QMAKE_CXXFLAGS += -fPIC -fvisibility=hidden -fvisibility-inlines-hidden
QMAKE_LFLAGS += -shared -rdynamic
</pre></div><p>Remember to remove the CONFIG += qdeclarative-boostable, if used (the same applies for meegotouch-boostable or qt-boostable). </p>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sun Mar 31 2013 20:49:11 for applauncherd by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
