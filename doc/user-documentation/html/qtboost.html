<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>applauncherd: Using the Qt booster</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="main.html">Optimising application startup</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Using the Qt booster </h1>  </div>
</div>
<div class="contents">
<p>This section describes how to use the Qt booster. The booster provides the application with the key libraries already present in the process, but no other initialisations are done in the booster.</p>
<h2><a class="anchor" id="intro"></a>
Prerequisites</h2>
<p>The launcher can start an application if the following prerequisites are met:</p>
<ul>
<li>The application is compiled and linked to a position independent binary (executable or library)</li>
</ul>
<ul>
<li>The application is started with the <code>invoker</code> command instead of executing the executable file.</li>
</ul>
<h2><a class="anchor" id="qtboostcompiling"></a>
1. Compiling and linking for launcher</h2>
<p>If you intend to run a binary with <code>applauncherd</code>, compile it with <code>-fPIC</code> option to produce position-independent code. It is recommended that you link them either as shared libraries, or, preferably, as position-independent executables, which can be executed both traditionally and with the launcher. The <code>-pie</code> and <code>-rdynamic</code> linker flags accomplish this.</p>
<p>To improve linking and loading times of shared object libraries, it is recommended that you hide any unnecessary symbols from the resulting binary by using <code>-fvisibility=hidden</code> and <code>-fvisibility-inlines-hidden</code> flags as well. However, <code>applauncherd</code> needs to find the entry point for your application, so the symbol <code>main</code> needs to be explicitly made visible. This can be done as follows:</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">  #include &lt;QtCore/QtGlobal&gt;</span>
  
  Q_DECL_EXPORT <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)
  {
  ...
  }
</pre></div><p>If your application loads a plug-in that needs to access some symbols in the main application, the symbols also need to be exported. In addition, you must use the <code>--global-syms</code> invoker parameter, as described in <a class="el" href="invokerparameters.html">Advanced invoker command line parameters</a>.</p>
<p>Normally you do not need to worry about the compiler and linker flags, as the <code>applauncherd-dev</code> package provides configuration options for <code>qmake</code>, <code>CMake</code>, and <code>pkg-config</code>. If you are building a Debian package, make your package build-depend on <code>applauncherd-dev</code> and your application binary package depend on <code>applauncherd</code>.</p>
<p>For details on how to get the compiler and linker flags, see <a class="el" href="usingqmake.html">Using qmake</a>, <a class="el" href="usingcmake.html">Using CMake</a>, or <a class="el" href="usingpkgconfig.html">Using pkg-config</a>.</p>
<h2><a class="anchor" id="qtboostexit"></a>
2. Adapting application source code</h2>
<p>No modifications are typically needed when the Qt booster is used. However, if the application has explicit calls to <code>exit()</code>, change them to use <code>_exit()</code> instead. This prevents cleanup actions related to shared libraries to be performed multiple times. For more details, see <a class="el" href="limitations.html">Limitations and known issues</a>.</p>
<h2><a class="anchor" id="qtboostinvoker"></a>
3. Launching the application</h2>
<p>Check that applauncherd package is installed and applancherd daemon is running. You can now run your application as usual as /usr/bin/myApp, or use the qtboosted launching by running:</p>
<div class="fragment"><pre class="fragment">invoker --type=q /usr/bin/myApp
</pre></div><h2><a class="anchor" id="qtboostfinishingtouch"></a>
4. Finishing touches</h2>
<p>The invoker can also provide single instance behaviour and a splash screen for your application as follows. For more details, see <a class="el" href="singleinstance.html">Enabling single instance support for an application</a> and <a class="el" href="splash.html">Enabling a splash screen for an application.</a></p>
<div class="fragment"><pre class="fragment">/usr/bin/invoker --single-instance --splash=/usr/share/myApp/splash.jpg --type=q /usr/bin/myApp
</pre></div> </div>
<hr class="footer"/><address class="footer"><small>Generated on Sun Mar 31 2013 20:49:11 for applauncherd by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
